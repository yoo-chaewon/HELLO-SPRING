## 	3-1. ì˜ì¡´ ê°ì²´(DI)

> DI(Dependency injection)ì„ ì´ìš©í•œ í”„ë¡œê·¸ë˜ë° ë°©ë²•ê³¼ ìŠ¤í”„ë§ì—ì„œì˜ DIì— ëŒ€í•´ì„œ í•™ìŠµí•œë‹¤.
>
> OOP í”„ë¡œê·¸ë˜ë° ë°©ë²• ì¤‘ í•˜ë‚˜ì˜ íŒ¨í„´,



### DI(Dependency Injection)ì´ë€?

- í˜„ì¬ ê°ì²´ê°€ ë‹¤ë¥¸ ê°ì²´ì™€ ìƒí˜¸ì‘ìš©(ì°¸ì¡°)í•˜ê³  ìˆë‹¤ë©´ ë‹¤ë¥¸ ê°ì²´ì— ì˜ì¡´ì„±ì„ ê°€ì§„ë‹¤.

  - ì˜ì¡´ì„±ì´ ìœ„í—˜í•œ ì´ìœ ëŠ”, 

    í•˜ë‚˜ì˜ ëª¨ë“ˆì´ ë°”ë€Œë©´ ì˜ì¡´í•œ ë‹¤ë¥¸ ëª¨ë“ˆê¹Œì§€ ë³€ê²½ë˜ì–´ì•¼ í•œë‹¤.

- ë”°ë¼ì„œ DIë€ ê°ì²´ ìì²´ê°€ ì•„ë‹ˆë¼ Frameworkì— ì˜í•´ ê°ì²´ì˜ ì˜ì¡´ì„±ì´ ì£¼ì…ë˜ëŠ” ì„¤ê³„ íŒ¨í„´ì„ ë§í•œë‹¤.

> https://gmlwjd9405.github.io/2018/11/09/dependency-injection.html

- ì´ëŠ” OOPí”„ë¡œê·¸ë˜ë° ë°©ë²• ì¤‘ í•˜ë‚˜ì˜ íŒ¨í„´ìœ¼ë¡œ,

  ì˜ˆë¥¼ ë“¤ì–´, ìƒì„±ìì—ì„œ ì£¼ì…, setterì—ì„œ ì£¼ì… ëª¨ë‘ ì´ì— ì†í•œë‹¤.

  +) ìƒì„±ì„í• ë•Œ DAOë¥¼ ë§Œë“¤ì–´ì„œ ë‹¤ë¥¸ ê°ì²´ì— DAOë¥¼ ë‹¤ ì£¼ì…í•˜ëŠ” ê²½ìš°ë„ ì´ì— ì†í•¨



### ìŠ¤í”„ë§ DIì„¤ì • ë°©ë²•

- ë¹ˆ(Bean)ê°ì²´ë¥¼ í•„ìš”ë¡œ í•˜ëŠ” ë¡œì§
- **ìŠ¤í”„ë§ ì„¤ì •íŒŒì¼**ì¸ `applicationContext.xml` -> GenericXmlApplicationContext-> **`Spring Container`** -> ê°ì²´ë“¤ -> getBean(new ìƒì„± ì•ˆí•´ì¤˜ë„ë¨.)

```xml
<bean id="" class="">
  <constructor-arg ref="studentDAO"/>
</bean>
```

- Spring Containerì— ê°ì²´ë“¤ì´ ëª¨ì—¬ìˆìœ¼ë‹ˆê¹Œ, Spring Containerì•ˆì—ì„œ ê°ì²´ë¼ë¦¬ ì˜ì¡´ ì£¼ì…

  

  

## 3-2. ë‹¤ì–‘í•œ ì˜ì¡´ ê°ì²´ ì£¼ì…

> ìƒì„±ìë¥¼ ì´ìš©í•œ ì˜ì¡´ ê°ì²´ ì£¼ì…
>
> setterë¥¼ ì´ìš©í•œ ì˜ì¡´ ê°ì²´ ì£¼ì…
>
> Listíƒ€ì… ì˜ì¡´ ê°ì²´ ì£¼ì…
>
> Map íƒ€ì… ê°ì²´ ì£¼ì…



- ##### ìƒì„±ìë¥¼ ì˜ìš©í•œ ì˜ì¡´ ê°ì²´ ì£¼ì…

  ```java
  public StudentRegisterService(StudentDao studentDao) { 
    this.studentDao = studentDao;
  }
  ```

  ```xml
  <bean id="registerService" class="ems.member.service.StudentRegisterService"> 			<constructor-arg ref="studentDao" ></constructor-arg>
  </bean>
  ```

- ##### setterë¥¼ ì´ìš©í•œ ì˜ì¡´ ê°ì²´ ì£¼ì…

  ```java
  public void setJdbcUrl(String jdbcUrl) { 
    this.jdbcUrl = jdbcUrl;
  }
  public void setUserId(String userId) { 
    this.userId = userId;
  }
  public void setUserPw(String userPw) { 
    this.userPw = userPw;
  }
  ```

  ```xml
  <bean id="dataBaseConnectionInfoDev" class="ems.member.DataBaseConnectionInfo"> 	 
    <property name="jdbcUrl" value="jdbc:oracle:thin:@localhost:1521:xe" /> 
    <property name="userId" value="scott" />
    <property name="userPw" value="tiger" />
  </bean>
  ```

- List íƒ€ì… ì˜ì¡´ ê°ì²´ ì£¼ì…

  ```java
  public void setDevelopers(List<String> developers) { 
    this.developers = developers;
  }
  ```

  ```xml
  <property name="developers"> 
    <list>
      <value>Cheney.</value>
      <value>Eloy.</value> 
      <value>Jasper.</value>
      <value>Dillon.</value>
      <value>Kian.</value>
    </list>
  </property>
  ```

- Mapíƒ€ì… ê°ì²´ ì£¼ì…

  ```java
  public void setAdministrators(Map<String, String> administrators) {
    this.administrators = administrators;
  }
  ```

  ```xml
  <property name="administrators"> 
    <map>
      <entry>
        <key>
          <value>Cheney</value>
        </key>
        <value>cheney@springPjt.org</value> 
      </entry>
      <entry>
        <key>
          <value>Jasper</value>
        </key>
        <value>jasper@springPjt.org</value> 
      </entry>
    </map>
  </property>
  ```

  

## 3-3. ìŠ¤í”„ë§ ì„¤ì • íŒŒì¼ ë¶„ë¦¬

> ìŠ¤í”„ë§ ì„¤ì •íŒŒì¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ ì„¤ì • íŒŒì¼ì„ ë¶„ë¦¬í•˜ëŠ” ë°©ë²•
>
> - ìŠ¤í”„ë§ ì„¤ì •íŒŒì¼ ë¶„ë¦¬
> - ë¹ˆ(Bean)ì˜ ë²”ìœ„



- ##### ìŠ¤í”„ë§ ì„¤ì • íŒŒì¼ ë¶„ë¦¬

  applicationContext.xml -> appCtx1.xml / appCtx2.xml

  - javaì—ì„œ -> ì„ í˜¸ ë§ì´ í•¨.

    ```java
    String[] appCtxs = {"appCtx1.xml", "appCtx2.xml", "appCtx3.xml"};
    GenericXmlApplication ctx = new GenericXmlApplication(appCtxs);
    ```

  - xmlì—ì„œ

    ```xml
    <import resouce="classpath:appCtx2.xml"/>
    <import resouce="classpath:appCtx3.xml"/>
    ```

    

- ##### ë¹ˆ(Bean)ì˜ ë²”ìœ„

  - ì‹±ê¸€í†¤(Singleton) -> ë””í´íŠ¸

    ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ìƒì„±ëœ ë¹ˆ(Bean)ê°ì²´ì˜ ê²½ìš° ë™ì¼í•œ íƒ€ì…ì— ëŒ€í•´ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í•œ ê°œë§Œ ìƒì„±ì´ ë˜ë©°, getBean()ë©”ì†Œë“œë¡œ í˜¸ì¶œë  ë•Œ ë™ì¼í•œ ê°ì²´ê°€ ë°˜í™˜ëœë‹¤.

    GenericXmlApplicationContext -> Spring Container -> ê°ì²´ë“¤ ğŸ‘ˆ getBean

    - ì´ë•Œ, getBean() ì„ ë‘ë²ˆ í•  ê²½ìš° ë‘ë²ˆë‹¤ ê°™ì€ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ê³  ìˆìŒ.

  - í”„ë¡œí† íƒ€ì…(Prototype)

    ì‹±ê¸€í†¤ ë²”ìœ„ì™€ ë°˜ëŒ€ì˜ ê°œë…ë„ ìˆëŠ”ë° ì´ë¥¼ í”„ë¡œí† íƒ€ì…(Prototype)ë²”ìœ„ë¼ê³  í•œë‹¤. í”„ë¡œí† íƒ€ì…ì˜ ê²½ìš° ê°œë°œìëŠ” ë³„ë„ë¡œ ì„¤ì •ì„ í•´ì¤˜ì•¼ í•˜ëŠ”ë°, ìŠ¤í”„ë§ ì„¤ì • íŒŒì¼ì—ì„œ ë¹ˆ(Bean)ê°ì²´ë¥¼ ì •ì˜í•  ë•Œ scopeì†ì„±ì„ ëª…ì‹œí•´ì£¼ë©´ ëœë‹¤.

    ```xml
    <bean id= class="scope.ex.DependencyBean" scope="prototype" >
      <constructor-arg ref="injectionBean" />
      <property name="injectionBean" ref="injectionBean" />
    </bean>
    ```

    

## 3-4. ì˜ì¡´ê°ì²´ ìë™ ì£¼ì…

> ì˜ì¡´ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ì£¼ì…í•˜ëŠ” ë°©ë²•
>
> <constructor-arg>ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìë™ìœ¼ë¡œ ì¸ìƒ‰í•´ì„œ ìë™ìœ¼ë¡œ ì£¼ì…í•˜ëŠ” ë°©ë²•,
>
> - ì˜ì¡´ê°ì²´ ìë™ ì£¼ì…ì´ë€
> - @Autowired
> - @Resource



- ##### ì˜ì¡´ê°ì²´ ìë™ ì£¼ì…ì´ë€?

  ìŠ¤í”„ë§ ì„¤ì • íŒŒì¼ì—ì„œ ì˜ì¡´ ê°ì²´ë¥¼ ì£¼ì…í•  ë•Œ <constructor-org>ë˜ëŠ” <property> íƒœê·¸ë¡œ ì˜ì¡´ ëŒ€ìƒ ê°ì²´ë¥¼ ëª…ì‹œí•˜ì§€ ì•Šì•„ë„ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìë™ìœ¼ë¡œ í•„ìš”í•œ ì˜ì¡´ ëŒ€ìƒ ê°ì²´ë¥¼ ì°¾ì•„ì„œ ì˜ì¡´ ëŒ€ìƒ ê°ì²´ê°€ í•„ìš”í•œ ê°ì²´ì— ì£¼ì…í•´ì£¼ëŠ” ê¸°ëŠ¥ì´ë‹¤. êµ¬í˜„ ë°©ë²•ì€ @Autowiredì™€ @Resourceì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´ì„œ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

  - Bean1/Bean2/Bean3 -> ìë™ì£¼ì… -> Bean

  

- ##### @Autowired

  ì£¼ì…í•˜ë ¤ê³  í•˜ëŠ” ê°ì²´ì˜ íƒ€ì…ì´ ì¼ì¹˜í•˜ëŠ” ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ì£¼ì…í•œë‹¤.

  

- ##### @Resource

  ì£¼ì…í•˜ë ¤ê³  í•˜ëŠ” ê°ì²´ì˜ ì´ë¦„ì´ ì¼ì¹˜í•˜ëŠ” ê°ì²´ë¥¼ ìë™ìœ¼ë¡œ ì£¼ì…í•œë‹¤.



## 3-5. ì˜ì¡´ê°ì²´ ì„ íƒ















